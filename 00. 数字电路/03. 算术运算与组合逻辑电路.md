# 03. 算术运算与组合逻辑电路

## 半加器

![Img](./FILES/03.%20算术运算与组合逻辑电路.md/img-20241118155135.png)

## 全加器
![Img](./FILES/03.%20算术运算与组合逻辑电路.md/img-20241118212910.png)
全加器（**Full Adder**）是数字电路中用于计算三位二进制数的和及进位的基本单元。它是实现复杂加法器（如多位二进制加法器）的基础模块。接下来，我将详细介绍全加器的**原理、功能、电路实现和工作过程**。

---

## **1. 全加器的功能**
全加器用于加三位输入：
- \( A \)：被加数的一位
- \( B \)：加数的一位
- \( C_{in} \)：从低位传来的进位

输出两位结果：
- **和位 \( S \)**：当前位的二进制和。
- **进位 \( C_{out} \)**：传递到更高位的进位。

### **真值表**
以下是真值表，展示所有可能的输入组合及其对应的输出 \( S \) 和 \( C_{out} \)：

| \( A \) | \( B \) | \( C_{in} \) | \( S \) (和) | \( C_{out} \) (进位) |
|:-------:|:-------:|:------------:|:------------:|:-------------------:|
|    0    |    0    |      0       |      0       |         0           |
|    0    |    0    |      1       |      1       |         0           |
|    0    |    1    |      0       |      1       |         0           |
|    0    |    1    |      1       |      0       |         1           |
|    1    |    0    |      0       |      1       |         0           |
|    1    |    0    |      1       |      0       |         1           |
|    1    |    1    |      0       |      0       |         1           |
|    1    |    1    |      1       |      1       |         1           |

---

## **2. 全加器的逻辑表达式**
从真值表中推导，和 \( S \) 和进位 \( C_{out} \) 的逻辑表达式为：

1. **和 \( S \)：**
   \[
   S = A \oplus B \oplus C_{in}
   \]
   - \( A \oplus B \) 表示 \( A \) 和 \( B \) 的异或，得出两者相加的二进制结果。
   - 再将异或结果与 \( C_{in} \) 异或，计算三者的和。

2. **进位 \( C_{out} \)：**
   \[
   C_{out} = (A \land B) \lor (B \land C_{in}) \lor (A \land C_{in})
   \]
   - 任何两位为1都会产生进位。

---

## **3. 全加器的电路实现**
全加器电路由**基本逻辑门**（与门、或门、非门、异或门）组成，分为两部分：
1. **和（S）电路**：实现 \( S = A \oplus B \oplus C_{in} \)。
2. **进位（Cout）电路**：实现 \( C_{out} = (A \land B) \lor (B \land C_{in}) \lor (A \land C_{in}) \)。

### **电路图结构**

#### (1) **计算和（S）**
- 两个异或门实现：\( A \oplus B \) 和 \((A \oplus B) \oplus C_{in}\)。
- 公式：
  \[
  S = (A \oplus B) \oplus C_{in}
  \]

#### (2) **计算进位（Cout）**
- 使用三个与门和一个或门。
- 公式：
  \[
  C_{out} = (A \land B) \lor (B \land C_{in}) \lor (A \land C_{in})
  \]

### **具体电路**
```
  A -----|>XOR|---- S1 -----|>XOR|---- S (和)
  B -----|      |           |      |
         |------|           |------|
               AND         XOR
               |            |
               |            C_in -----|>XOR|----|
               |                              |
  A ---------- AND                          OR
  B ---------- AND                          |
  C_in ------- AND------------------------- Cout (进位)
```

---

## **4. 全加器的工作过程**
全加器电路的工作过程如下：
1. **计算和**：
   - 首先异或输入 \( A \) 和 \( B \) 来得到部分和 \( A \oplus B \)。
   - 然后将部分和与进位输入 \( C_{in} \) 异或，得到最终的和 \( S \)。

2. **计算进位**：
   - 检查 \( A \) 和 \( B \) 是否都为1（通过 \( A \land B \) 实现）。
   - 检查 \( B \) 和 \( C_{in} \) 是否都为1（通过 \( B \land C_{in} \) 实现）。
   - 检查 \( A \) 和 \( C_{in} \) 是否都为1（通过 \( A \land C_{in} \) 实现）。
   - 任何两位为1，都会产生进位，最终通过 \( \lor \) 门求并，得到进位 \( C_{out} \)。

---

## **5. 多位二进制加法器**
- **全加器的扩展**：多个全加器可以级联构成多位二进制加法器（如4位、8位加法器）。
- 每个全加器的 \( C_{out} \) 作为下一个全加器的 \( C_{in} \)。

例如，对于4位二进制加法：
1. 第1位加法使用全加器，输入是最低位 \( A_0, B_0 \) 和初始进位 \( C_{in} = 0 \)。
2. 第2位加法使用全加器，输入是 \( A_1, B_1 \) 和来自第1位的进位。
3. 重复，直到最高位。

---

## **6. 全加器的实际应用**
- **二进制加法**：计算器、CPU中的ALU（算术逻辑单元）中核心组成部分。
- **位移运算**：支持算术移位的溢出检测。
- **数据加密**：全加器的逻辑与加密算法中的异或操作有类似基础。
- **计数器**：用于二进制计数电路。

---

## **总结**
全加器是数字电路中的重要组成部分，用于加三位二进制数并产生和与进位。它可以通过异或、与、或等基本逻辑门实现，具有清晰的结构和扩展性，是复杂加法器和算术逻辑单元的基础。

## 案例 判断输入信号的奇偶性

当输入信号为1的的数量为奇数时，输出信号为1，用多变量异或实现。

A⊕B⊕C⊕D = 1 等同于 ABCD中有奇数个信号。

## 案例 信号计数
好的，我们来仅使用 **与门 (AND)**、**或门 (OR)** 和 **非门 (NOT)** 实现上述功能。以下是详细的实现方案：

---

### **功能1：对于四个输入信号，当输入大于等于2时输出为真**

#### **逻辑分析**
- 四个输入信号 \( A, B, C, D \)，需要判断其中至少有两个为真。
- 条件转换为：从 \( A, B, C, D \) 中，任意两个信号为真时，输出为真。

#### **逻辑表达式**
\[
\text{Output} = (A \land B) \lor (A \land C) \lor (A \land D) \lor (B \land C) \lor (B \land D) \lor (C \land D)
\]

#### **实现方法**
1. 使用 **AND 门** 实现两两组合的 "与" 运算：
   - \( P_1 = A \land B \)
   - \( P_2 = A \land C \)
   - \( P_3 = A \land D \)
   - \( P_4 = B \land C \)
   - \( P_5 = B \land D \)
   - \( P_6 = C \land D \)

2. 使用 **OR 门** 将这些结果合并：
   - \( \text{Output} = P_1 \lor P_2 \lor P_3 \lor P_4 \lor P_5 \lor P_6 \)

---

### **功能2：对于四个输入信号，当输入为奇数时输出为真**

#### **逻辑分析**
- 输入为奇数时，意味着 1 的数量是奇数。
- 根据奇偶性定义，奇数可以通过 **XOR 运算** 实现。
- **XOR 运算的逻辑表达式**：
  \[
  A \oplus B = (A \land \neg B) \lor (\neg A \land B)
  \]

#### **逻辑表达式**
- 将 4 个输入信号逐步组合：
  \[
  \text{Output} = A \oplus B \oplus C \oplus D
  \]
- 展开为：
  \[
  \text{Output} = \big((A \land \neg B) \lor (\neg A \land B)\big) \oplus C \oplus D
  \]

#### **实现方法**
1. 用 **与门** 和 **或门** 实现两两异或：
   - \( P_1 = (A \land \neg B) \lor (\neg A \land B) \)
   - \( P_2 = (P_1 \land \neg C) \lor (\neg P_1 \land C) \)
   - \( \text{Output} = (P_2 \land \neg D) \lor (\neg P_2 \land D) \)

---

### **功能3：对于四个输入信号，对应三个输出信号，表示为真的个数**

#### **逻辑分析**
- 四个输入信号 \( A, B, C, D \)，结果需要是一个三位二进制数 \( O_2 O_1 O_0 \)，表示 \( A, B, C, D \) 为真的个数。
- 需要逐位构造 \( O_2, O_1, O_0 \) 的逻辑表达式。

#### **输出 \( O_0 \)（最低位）**
- \( O_0 = \text{1的数量是奇数} \)
- 等价于：
  \[
  O_0 = A \oplus B \oplus C \oplus D
  \]
- **实现方法**：
  - 按功能2的方法实现。

#### **输出 \( O_1 \)（次低位）**
- \( O_1 = \text{1的数量为2或3} \)
- 逻辑分析：
  - 当 \( A + B + C + D = 2, 3 \) 时，二进制结果的次低位为1。
- 转化为组合逻辑：
  - \( O_1 = (A \land B) \lor (A \land C) \lor (A \land D) \lor (B \land C) \lor (B \land D) \lor (C \land D) \)
  - 排除 \( A + B + C + D = 4 \) 的影响，直接处理高位 \( O_2 \)。

#### **输出 \( O_2 \)（最高位）**
- \( O_2 = \text{1的数量为4} \)
- 逻辑表达式：
  - \( O_2 = A \land B \land C \land D \)

---

### **逻辑门实现的总方案**
#### **组合**
1. 通过功能1实现 \( O_1 \)。
2. 通过功能2实现 \( O_0 \)。
3. 单独处理 \( O_2 \) 逻辑。

#### **最终表达式**
- \( O_2 = A \land B \land C \land D \)
- \( O_1 = (A \land B) \lor (A \land C) \lor (A \land D) \lor (B \land C) \lor (B \land D) \lor (C \land D) \)
- \( O_0 = A \oplus B \oplus C \oplus D \)（使用展开的异或表达式实现）

通过以上逻辑门组合，可以仅用 **与或非门** 完成所有功能的实现。